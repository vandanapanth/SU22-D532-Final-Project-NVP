<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Road Safety Analysis</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"> 
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> 
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.js"></script>
        <script crossorigin="anonymous"
	        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" >
	    </script>
        <script>$(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
        </script>
        <style>
            body {
              position: relative; 
            }
        </style>
        <style>
             .btn {
                color: #efe8e8;
                background-color: #2f2e2e
            }
        </style>
        <style>
            thead th{
                position: sticky;
                top: 0;
                background-color: #2f2e2e;
                color: #efe8e8;
            }
        </style>
    </head>

    <body>
        <nav id="mynavbar" class="navbar navbar-inverse navbar-fixed-top nav-pills">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand">Road Safety Analysis</a>
                </div>
                <ul class = "nav navbar-nav navbar-right">
                    <li class="active"><a href="#homePage"><span class="glyphicon glyphicon-home"></span> Home</a></li>
                    <li><a href="#createAccident">Report an accident</a></li>
                    <li><a href="#visualization">Visualizations</a></li>
                </ul>
            </div>
        </nav>

            <div id="homePage" class="media">
                <img src="{{ url_for('static', filename='p06vd8mk.jpeg') }}" width="100%" />
            </div>
            <div class="well" id="createAccident">Accident Data</div>
            </div>
            <div class="container-fluid">
                <button type="button" onclick="createAccident()">Report an accident</button>
                <script>
                    function createAccident() {
                        var table = document.getElementById("accidentTable");
                        var row = table.insertRow(1);
                        var accident_id = row.insertCell(0);
                        var time = row.insertCell(1);
                        var date = row.insertCell(2);
                        var city = row.insertCell(3);
                        var state = row.insertCell(4);
                        var postcode = row.insertCell(5);
                        var casualties = row.insertCell(6);
                        var road_no = row.insertCell(7);
                        var road_type = row.insertCell(8);                   
                    }
                </script>
                <!-- <script>
                    function accidentDelete(ctl) {
                        url : '/deleteaccident'
                        data : 
                        var x = document.getElementById("accidentTable").rows[0].cells[0].innerHTML
                    $(ctl).parents("tr").remove();
                    } -->
                </script>
                <div style="height: 700px; overflow:auto">
                    <table class = "table table-bordered table-striped" id="accidentTable" style="height: 1600px;">
                        <thead>
                            <th>Accident ID</th>
                            <th>Time of accident</th>
                            <th>Date of accident</th>
                            <th>City</th>
                            <th>State</th>
                            <th>Postcode</th>
                            <th>Road Number</th>
                            <th>Road type</th>
                            <th>Light Conditions</th>
                            <th>Weather Conditions</th>
                            <th>Road Conditions</th>
                            <th>Casualties</th>
                            <th>Edit</th>
                            <th></a> Delete</th>
                        </thead>
                        {% for accident_id,time,date,city,state,postcode,road_number,road_type,light_conditions,road_conditions,weather_conditions,casualties in accident %}
                        <tr>
                        <td>{{ accident_id }}</td>
                        <td>{{ time }}</td>
                        <td>{{ date }}</td>
                        <td>{{ city }}</td>
                        <td>{{ state }}</td>
                        <td>{{ postcode }}</td>
                        <td>{{ road_number }}</td>
                        <td>{{ road_type }}</td>
                        <td>{{ light_conditions }}</td>
                        <td>{{ road_conditions }}</td>
                        <td>{{ weather_conditions }}</td>
                        <td>{{ casualties }}</td>
                        <td>
                                <button class="btn btn-sm rounded-0" type="button" data-toggle="tooltip" data-placement="top" title="Edit"><span class="glyphicon glyphicon-pencil"></span></i></button>
                        </td>
                        <td>
                                <button class="btn btn-sm rounded-0" type="button" data-toggle="tooltip" data-placement="top" title="Delete"><span class="glyphicon glyphicon-trash"></span><a href="/deleteaccident/{{ accident_id }}"></a></i></button>
                        </td>
                        </tr>
                        {% endfor %} 
                    </table>
                </div>
            </div>
            <div class="well" id="visualization">Select a visualization</div>
            <div class="col-sm-4">
                    <button type="button" class="btn btn-block btn-info">Accidents over the years</button>
                    <br>
                    <button type="button" class="btn btn-info btn-block">Police Response based on accident severity</button>
                    <br>
                    <div class="dropdown">
                        <button class="btn btn-info btn-block dropdown-toggle" type="button" id="menu1" data-toggle="dropdown">Accident trends <span class="caret"></span></button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Weather Condtions</a></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Light Condtions</a></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Time of day</a></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Day of Week</a></li>
                        </ul>
                    </div>
            </div>
            <div class="col-sm-8">
                <img src="{{ url_for('static', filename='policeresponse.jpeg') }}" width="75%" />
            </div>
    </body>
</html>